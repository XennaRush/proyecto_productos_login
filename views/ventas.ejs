<%- include("templates/header", { titulo: "Historial de Ventas (Admin)" }) %>

<div class="alert alert-secondary">Aqu√≠ se muestran todas las ventas registradas.</div>

<table class="table table-bordered table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>Producto</th>
      <th>Cantidad</th>
      <th>Precio Unitario</th>
      <th>Total</th>
      <th>Comprador</th>
      <th>Fecha</th>
    </tr>
  </thead>
  <tbody>
    <% if (ventas.length === 0) { %>
      <tr>
        <td colspan="6" class="text-center">No hay ventas registradas</td>
      </tr>
    <% } else { %>
      <% ventas.forEach(v => { %>
        <tr>
          <td><%= v.producto ? v.producto.nombre : "Producto eliminado" %></td>
          <td><%= v.cantidad %></td>
          <td>$<%= v.precioUnitario.toFixed(2) %></td>
          <td>$<%= v.total.toFixed(2) %></td>
          <td><%= v.comprador %></td>
          <td><%= new Date(v.createdAt).toLocaleString("es-MX") %></td>
        </tr>
      <% }) %>
    <% } %>
  </tbody>
</table>

<%- include("templates/footer") %>
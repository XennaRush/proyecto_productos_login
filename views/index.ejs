<%- include("templates/header", { titulo: "Inicio" }) %>

<div class="row mb-4">
  <div class="col-md-8">
    <div class="card mb-3">
      <div class="card-body">
        <h3 class="card-title">Gestor de Productos</h3>
        <p class="card-text">
          Bienvenido al sistema de gestión de productos y ventas.<br>
          <strong>¿Qué puedes hacer?</strong>
        </p>
        <ul>
          <li>Como <strong>Usuario</strong>: puedes comprar productos, ver tu historial de compras y editar tu perfil (incluyendo tu foto).</li>
          <li>Como <strong>Administrador</strong>: puedes agregar, editar y borrar productos (con fotos), ver y cambiar el rol de usuarios, y consultar el historial de todas las compras.</li>
          <li>El primer administrador se crea automáticamente. Todos los registros nuevos son usuarios normales.</li>
          <li>Las fotos de perfil y productos se gestionan y eliminan correctamente en el servidor.</li>
        </ul>
        <div class="mt-3">
          <% if (sessionUser && sessionUser.rol === 'admin') { %>
            <a href="/admin/productos" class="btn btn-warning me-2">Gestión de Productos</a>
            <a href="/admin/usuarios" class="btn btn-info me-2">Gestión de Usuarios/Roles</a>
            <a href="/admin/ventas" class="btn btn-secondary">Historial de Compras</a>
          <% } else if (sessionUser) { %>
            <a href="/usuario" class="btn btn-success">Ir al Catálogo (Usuario)</a>
          <% } %>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">Instrucciones rápidas</div>
      <div class="card-body">
        <ol>
          <li>Como <strong>Usuario</strong>: compra productos, revisa tu historial y edita tu perfil.</li>
          <li>Como <strong>Administrador</strong>: gestiona productos y usuarios, y consulta todas las compras.</li>
          <li>Las fotos de perfil y productos se eliminan físicamente al borrar el usuario o producto.</li>
        </ol>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card text-center">
      <div class="card-body">
        <h5 class="card-title">Accesos rápidos</h5>
        <% if (!sessionUser) { %>
          <a href="/auth/login" class="btn btn-outline-primary mb-2 w-100">Iniciar sesión</a>
          <a href="/auth/registrar" class="btn btn-outline-secondary mb-2 w-100">Registrarse</a>
        <% } else if (sessionUser.rol === 'admin') { %>
          <a href="/admin/productos" class="btn btn-outline-warning mb-2 w-100">Gestión de Productos</a>
          <a href="/admin/usuarios" class="btn btn-outline-info mb-2 w-100">Gestión de Usuarios/Roles</a>
          <a href="/admin/ventas" class="btn btn-outline-secondary w-100">Historial de Compras</a>
        <% } else { %>
          <a href="/usuario" class="btn btn-outline-success mb-2 w-100">Catálogo Usuario</a>
        <% } %>
      </div>
    </div>
  </div>
</div>

<%- include("templates/footer") %>